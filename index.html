<!doctype html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô ‚Ä¢ Simple & Personal</title>
  <meta name="color-scheme" content="light only">
  <meta name="description" content="‡∏Å‡∏£‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏à‡∏£‡∏¥‡∏á ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏±‡∏ö‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{ --from:#0f0c29; --mid:#302b63; --to:#24243e; --primary:#6366f1; --secondary:#8b5cf6; --success:#10b981; --warn:#f59e0b; --danger:#ef4444; --ring:#e5e7eb; }
    html,body{height:100%}
    body{ margin:0; padding:0; box-sizing:border-box; font-family:'Inter','Noto Sans Thai',system-ui,-apple-system,'Segoe UI',sans-serif; background:linear-gradient(135deg,var(--from) 0%,var(--mid) 50%,var(--to) 100%); }
    .glass{ background:rgba(255,255,255,.94); backdrop-filter:blur(16px); border:1px solid rgba(255,255,255,.35) }
    .btn{ position:relative; overflow:hidden; transition:transform .2s ease, box-shadow .2s ease }
    .btn:hover{ transform: translateY(-1px); box-shadow:0 10px 24px rgba(99,102,241,.35) }
    .mono{ font-variant-numeric:tabular-nums }
    .chip{ display:inline-block; padding:.15rem .5rem; border-radius:.5rem; background:#f1f5f9; font-weight:700 }
    .grid-auto{ display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:.75rem }
    .ring-anim{ transition:stroke-dashoffset .9s cubic-bezier(.2,.8,.2,1) }
    @media (prefers-reduced-motion:reduce){ *{ animation-duration:.001ms !important; animation-iteration-count:1 !important; transition-duration:.001ms !important; scroll-behavior:auto !important } }
    input[data-money]{ outline:none } td input{ text-align:right }
    .sr{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0 }

    /* ===== Print styles for clean PDF ===== */
    .no-print{ }
    @media print{
      body{ background:#fff !important; }
      #progressContainer, #welcomeScreen, #questionScreen, #toastRoot { display:none !important; }
      #finalScreen{ display:block !important; }
      .no-print{ display:none !important; }
      .glass{ background:#fff !important; border:0 !important; backdrop-filter:none !important; box-shadow:none !important; }
      .print-container{ box-shadow:none !important; }
      *{-webkit-print-color-adjust:exact; print-color-adjust:exact}
      .page-break-avoid{ break-inside:avoid; }
      .page-break{ page-break-before:always; }
    }
  </style>
</head>
<body class="min-h-full">
  <!-- decorations -->
  <div aria-hidden="true" class="pointer-events-none select-none no-print">
    <div class="absolute top-20 left-10 w-72 h-72 bg-purple-500 rounded-full mix-blend-multiply blur-3xl opacity-20"></div>
    <div class="absolute top-40 right-10 w-72 h-72 bg-blue-500 rounded-full mix-blend-multiply blur-3xl opacity-20"></div>
    <div class="absolute -bottom-20 left-1/2 w-72 h-72 bg-indigo-500 rounded-full mix-blend-multiply blur-3xl opacity-20"></div>
  </div>

  <main class="relative z-10 min-h-full flex items-center justify-center p-4">
    <div class="w-full max-w-3xl print-container">
      <!-- Progress -->
      <div id="progressContainer" class="mb-6 hidden" aria-live="polite">
        <div class="flex justify-between items-center mb-2">
          <span class="text-white/80 text-sm font-medium">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</span>
          <span id="progressText" class="text-white text-sm font-bold">0%</span>
        </div>
        <div class="bg-white/15 rounded-full h-2 overflow-hidden backdrop-blur">
          <div id="progressBar" class="h-2 rounded-full" style="width:0%;background:linear-gradient(90deg,var(--primary),var(--secondary))"></div>
        </div>
      </div>

      <div class="glass rounded-3xl shadow-2xl p-6 sm:p-8">
        <!-- Welcome -->
        <section id="welcomeScreen">
          <div class="text-center">
            <div class="inline-block p-6 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-3xl mb-6 shadow-2xl" aria-hidden="true">
              <div class="text-6xl">üí∞</div>
            </div>
            <h1 class="text-4xl sm:text-5xl font-extrabold mb-3" style="background:linear-gradient(135deg,var(--primary),var(--secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</h1>
            <p class="text-gray-600 mb-3 sm:mb-4 text-base sm:text-lg font-medium max-w-md mx-auto">‡∏Å‡∏£‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏à‡∏£‡∏¥‡∏á ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏±‡∏ö‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏±‡πâ‡∏ô‡πÜ ‡∏ä‡∏±‡∏î‡πÜ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏ú‡∏ô‡∏õ‡∏£‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á</p>
            <p class="text-xs text-gray-400 max-w-md mx-auto mb-6">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á: ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•</p>
            <div class="grid gap-3 sm:gap-4">
              <button id="btnStart" data-action="start" class="btn px-6 py-4 sm:px-10 sm:py-5 rounded-2xl text-white font-bold text-base sm:text-lg shadow-xl" style="background:linear-gradient(135deg,var(--primary),var(--secondary))">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô ‚Üí</button>
              <button id="btnResume" data-action="resume" class="btn px-6 py-4 rounded-2xl font-semibold text-gray-800 bg-white border border-gray-200 hidden">‚ñ∂Ô∏è ‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏Å‡πà‡∏≠‡∏ô</button>
            </div>
          </div>
        </section>

        <!-- Questions -->
        <section id="questionScreen" class="hidden" aria-live="polite"><div id="questionContent"></div></section>
        <!-- Final -->
        <section id="finalScreen" class="hidden"><div id="finalContent"></div></section>
      </div>
    </div>
  </main>

  <!-- Toast -->
  <div id="toastRoot" class="fixed left-1/2 -translate-x-1/2 bottom-6 z-[9999] no-print" aria-live="assertive" aria-atomic="true"></div>

  <script>
    /* ===== Helpers ===== */
    var moneyFmt = new Intl.NumberFormat('th-TH', { maximumFractionDigits: 0 });
    function thb(n){ return moneyFmt.format(Math.round(isFinite(n)? n:0)); }
    function buzz(ms){ if(ms===void 0) ms=12; if(navigator.vibrate) navigator.vibrate(ms); }
    function $(id){ return document.getElementById(id); }

    function toast(msg, type){
      if(type===void 0) type='info';
      var root=$('toastRoot'); if(!root) return;
      var el=document.createElement('div');
      el.className='px-4 py-3 rounded-xl text-white shadow-lg mb-2';
      el.style.background= type==='success'?'#10b981': type==='warn'?'#f59e0b': type==='error'?'#ef4444':'#6366f1';
      el.textContent= String(msg); root.appendChild(el);
      setTimeout(function(){ el.style.opacity=.0; el.style.transform='translateY(6px)'; },1600);
      setTimeout(function(){ root.removeChild(el); },2200);
    }

    // ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å value ‡πÄ‡∏™‡∏°‡∏≠ (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á = 0)
    function parseMoneyInput(el){
      if(!el) return 0;
      var raw = (el.value||'').toString().replace(/,/g,'').trim();
      if(raw==='') return 0;
      var n = Number(raw);
      return (isFinite(n) && n>=0) ? n : 0;
    }

    // formatter
    document.addEventListener('input', function(e){
      var t=e.target;
      if(t && t.matches && t.matches('input[data-money]')){
        var cleaned = t.value.replace(/[^\d.]/g,'').replace(/(\..*?)\..*/,'$1');
        if(cleaned===''){ t.value=''; return; }
        var parts = cleaned.split('.');
        parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ',');
        t.value = parts.join('.');
      }
    });

    /* ===== Data ===== */
    var currentStep=0;
    var userData = { income:0, debtExpense:0, expenses:{}, savings:0 };

    var expenseCategories = [
      { key:'food', label:'‡∏Ñ‡πà‡∏≤‡∏≠‡∏≤‡∏´‡∏≤‡∏£', icon:'üçú', need:true },
      { key:'transport', label:'‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á/‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô', icon:'üöó', need:true },
      { key:'household', label:'‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô', icon:'üè†', need:false },
      { key:'utilities', label:'‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥/‡πÑ‡∏ü', icon:'üí°', need:true },
      { key:'entertainment', label:'‡∏™‡∏±‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå/‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏¥‡∏á', icon:'üéâ', need:false },
      { key:'clothing', label:'‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤/‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏î‡∏±‡∏ö', icon:'üëî', need:false },
      { key:'internet', label:'‡πÄ‡∏ô‡πá‡∏ï/‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå', icon:'üì±', need:true },
      { key:'other', label:'‡∏≠‡∏∑‡πà‡∏ô‡πÜ', icon:'üìù', need:false }
    ];

    var questions = [
      { id:'income',   title:'‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô', icon:'üíµ', desc:'‡∏Å‡∏£‡∏≠‡∏Å ‚Äú‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏°‚Äù ‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô', type:'single', field:'income' },
      { id:'debt',     title:'‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏´‡∏ô‡∏µ‡πâ‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô', icon:'üí≥', desc:'‡∏Å‡∏£‡∏≠‡∏Å‡∏¢‡∏≠‡∏î‡∏ú‡πà‡∏≠‡∏ô/‡∏ä‡∏≥‡∏£‡∏∞‡∏´‡∏ô‡∏µ‡πâ‡∏£‡∏ß‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô', type:'single', field:'debtExpense' },
      { id:'expenses', title:'‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏à‡∏≥ (‡πÅ‡∏¢‡∏Å‡∏´‡∏°‡∏ß‡∏î)', icon:'üõí', desc:'‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡∏°‡∏ß‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô', type:'multiple', field:'expenses' },
      { id:'savings',  title:'‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô', icon:'üè¶', desc:'‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡∏™‡∏∞‡∏™‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà', type:'single', field:'savings' }
    ];

    /* ===== Flow ===== */
    function setProgress(i,total){
      var p=Math.max(0,Math.min(100,Math.round(i/total*100)));
      var bar=$('progressBar'); if(bar) bar.style.width=p+'%';
      var txt=$('progressText'); if(txt) txt.textContent=p+'%';
    }

    function startApp(){
      var w=$('welcomeScreen'); if(w) w.classList.add('hidden');
      var pc=$('progressContainer'); if(pc) pc.classList.remove('hidden');
      currentStep=0; renderQuestion();
    }

    function prev(){ if(currentStep>0){ currentStep--; renderQuestion(); } }
    function moneyInput(id, placeholder){ if(placeholder===void 0) placeholder='0';
      return '<input type="text" id="'+id+'" data-money class="w-full px-6 py-4 border-0 rounded-2xl text-xl font-semibold text-gray-800 mono" placeholder="'+placeholder+'" inputmode="decimal" aria-label="‡πÉ‡∏™‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô">'; }

    function renderQuestion(){
      var q=questions[currentStep];
      var totalSteps=questions.length;
      setProgress(currentStep+1,totalSteps);
      var qsEl=$('questionScreen'); if(qsEl) qsEl.classList.remove('hidden');
      var fs=$('finalScreen'); if(fs) fs.classList.add('hidden');

      if(q.type==='single'){
        $('questionContent').innerHTML =
          '<div class="text-center mb-6">'+
            '<div class="inline-block p-5 bg-gradient-to-br from-purple-100 to-indigo-100 rounded-2xl mb-4" aria-hidden="true"><div class="text-5xl">'+q.icon+'</div></div>'+
            '<h2 class="text-2xl sm:text-3xl font-bold mb-2 text-gray-800">'+q.title+'</h2>'+
            '<p class="text-gray-600 font-medium">'+q.desc+'</p>'+
          '</div>'+
          '<label class="sr" for="money_single">'+q.title+'</label>'+
          '<div class="mb-6">'+moneyInput('money_single')+'</div>'+
          '<div class="flex gap-3">'+
            (currentStep>0?'<button id="btnPrev" class="flex-1 px-6 py-4 bg-gray-100 text-gray-700 font-bold rounded-2xl">‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>':'')+
            '<button id="btnNext" class="btn flex-1 px-6 py-4 text-white font-bold rounded-2xl shadow-lg" style="background:linear-gradient(135deg,var(--primary),var(--secondary))">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Üí</button>'+
          '</div>';
        var el=$('money_single'); var val=userData[q.field]||0; if(val){ el.value=thb(val); }
        if(el) el.focus();
      }

      var bp=$('btnPrev'); if(bp) bp.addEventListener('click', prev);
      var bn=$('btnNext'); if(bn) bn.addEventListener('click', next);
    }

    function next(){
      var q=questions[currentStep];
      if(q.type==='single'){
        var val=parseMoneyInput($('money_single'));
        if(!isFinite(val) || val<0){ toast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á','warn'); return; }
        userData[q.field]=val;
      } 
      currentStep++; if(currentStep<questions.length){ renderQuestion(); } else { renderFinal(); }
    }

    function renderFinal(){
      var fs=$('finalScreen'); if(fs) fs.classList.remove('hidden');
      var R=userData;

      $('finalContent').innerHTML = '<h2>‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h2>' +
        '<p>‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏°: ' + thb(R.income) + ' ‡∏ø</p>' +
        '<p>‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏´‡∏ô‡∏µ‡πâ: ' + thb(R.debtExpense) + ' ‡∏ø</p>';
    }

    document.addEventListener('DOMContentLoaded', function(){
      document.getElementById('btnStart').addEventListener('click', startApp);
      document.getElementById('btnResume').addEventListener('click', resumeApp);
    });
  </script>
</body>
</html>
